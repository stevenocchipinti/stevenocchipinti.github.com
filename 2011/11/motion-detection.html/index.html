
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->

<head>


<meta charset="utf-8">
<meta http-equiv="cleartype" content="on">

<title>Motion Detection - Steven Occhipinti</title>
<meta name="author" content="Steven Occhipinti">




<meta name="description" content="When I learn something cool, I'll try to record it here so I don't forget and maybe someone else may benefit from it too">

<meta name="keywords" content="gnome3 linux ubuntu unity webcam ">


<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Twitter Cards -->

  
    <meta name="twitter:card" content="summary">
    <meta name="twitter:image" content"">
  
  <meta name="twitter:title" content="Motion detection">
  <meta name="twitter:description" content="When I learn something cool, I'll try to record it here so I don't forget and maybe someone else may benefit from it too">
  <meta name="twitter:creator" content="@steveocchipinti">


<!-- Open Graph -->
<meta property="og:local" content="en_US">
<meta property="og:type" content="article">
<meta property="og:url" content="http://blog.stevenocchipinti.com/2011/11/motion-detection.html">
<meta property="og:title" content="Motion detection">
<meta property="og:description" content="When I learn something cool, I'll try to record it here so I don't forget and maybe someone else may benefit from it too">

  <meta property="og:image" content="">

<meta property="og:site_name" content="Steven Occhipinti">

<link rel="canonical" href="http://blog.stevenocchipinti.com/2011/11/motion-detection.html">
<link href="/favicon.ico" rel="icon">
<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
<link href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
<link href="/atom.xml" rel="alternate" title="Steven Occhipinti" type="application/atom+xml">

<script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>
<script>Modernizr || document.write('<script src="/javascripts/vendor/modernizr-2.6.2.custom.min.js"><\/script>') </script>



<!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">


</head>

<body id="post" class="feature">

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->
<nav id="dl-menu" class="dl-menuwrapper" role="navigation">
  <button class="dl-trigger">Open Menu</button>
  <ul class="dl-menu">
    <li>
      <a href="/"><i class="fa fa-home"></i>Home</a>
    </li>
    <li>
      <a href="#"><i class="fa fa-user"></i> About Me</a>
      <ul class="dl-submenu">
        <li>
          <img src="https://www.gravatar.com/avatar/207d31274969a51f4bbfedf875b54eb5.png?s=500" alt="Steven Occhipinti photo" class="author-photo">
          <h4>Steven Occhipinti</h4>
          <p></p>
        </li>
        
        
        <li>
          <a href="https://github.com/stevenocchipinti"><i class="fa fa-github"></i> GitHub</a>
        </li>
        <li>
          <a href="https://twitter.com/steveocchipinti"><i class="fa fa-twitter"></i> Twitter</a>
        </li>
        
        <li>
          <a href="http://flickr.com/stevenocchipinti"><i class="fa fa-flickr"></i> Flickr</a>
        </li>
        <li>
          <a href="http://facebook.com/stevenocchipinti"><i class="fa fa-facebook"></i> Facebook</a>
        </li>
        <li>
          <a href="http://au.linkedin.com/pub/steve-occhipinti/18/55/750"><i class="fa fa-linkedin"></i> LinkedIn</a>
        </li>
      </ul><!-- /.dl-submenu -->
    </li>
    <li>
      <a href="#"><i class="fa fa-bars"></i> Posts</a>
      <ul class="dl-submenu">
        <li>
          <a href="/posts/"><i class="fa fa-calendar"></i> By Year</a>
        </li>
        <li>
          <a href="/categories/"><i class="fa fa-tag"></i> By Category</a>
        </li>
      </ul>
    </li>
    <li>
      <a onclick="setTimeout(function() {$('.searchbox').focus();}, 500);" href="#"><i class="fa fa-search"></i> Search</a>
      <ul class="dl-submenu">
        <li>
          <style>
            .searchbox:focus {
              outline: 0;
            }
            .searchbox {
              background-color: #222;
              color: white;
              border: 0;
              height: 50px;
              width: 100%;
              padding-left: 20px;
            }
          </style>
          <form onsubmit="window.location.href='https://google.com/search?q=site:blog.stevenocchipinti.com+' + this.q.value;return false;" action="">
            <input class="searchbox" type="text" name="q" placeholder="Search">
          </form>
        </li>
      </ul>
    </li>
    <li>
      <a href="/projects/"><i class="fa fa-code"></i> Projects</a>
    </li>
    <li>
      <a href="/travel/"><i class="fa fa-plane"></i> Travel</a>
    </li>
    
  </ul><!-- /.dl-menu -->
</nav><!-- /.dl-menuwrapper -->


<div class="entry-header">
  
  <div class="entry-image">
    
    <img src="/images/hero.jpg" alt="Motion detection">
    
  </div><!-- /.entry-image -->
</div><!-- /.entry-header -->

<div id="main" role="main">
  <article class="hentry">
    <header class="header-title">
      <div class="header-title-wrap">
        
          <h1 class="entry-title"><a href="/2011/11/motion-detection.html" rel="bookmark" title="Motion detection">Motion detection</a></h1>
        
        <h2>November 05, 2011</h2>
      </div><!-- /.header-title-wrap -->
    </header>
    <div class="entry-content">
      <div class="css-full-post-content js-full-post-content">
The way my desk is positioned means that when I&#8217;m on my computer  I face the corner of the room, which means the door is behind me.<br />Quite often I&#8217;ll stay up late working away till early hours of the morning and usually music comes hand-in-hand with coding (for me anyway), so when it&#8217;s late, I use headphones so I don&#8217;t disturb anyone else.<br /><br />This has caused me some grief as sometimes someone will come into my room for whatever reason and find me with my back to the them and headphones in, so knocking at the door or saying my name does not get my attention.<br />This leaves the last resort of tapping me on the shoulder which scares the crap out of me!<br /><br />A while ago I invested in a convex mirror designed to go on your computer screen so you can see who&#8217;s coming up from behind.<br />Well, with a 24-inch screen and deep concentration, this small mirror doesn&#8217;t catch me eye at all, so I still hit the ceiling when someone taps me on the shoulder.<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-gMLpyxY81Sc/TrUzPCaiQEI/AAAAAAAAACs/h8ZFlPXZhzM/s1600/mirror.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="320" src="http://1.bp.blogspot.com/-gMLpyxY81Sc/TrUzPCaiQEI/AAAAAAAAACs/h8ZFlPXZhzM/s320/mirror.jpg" width="251" /></a></div><br /><br />For my birthday I got this amazing <a href="http://www.astrogaming.com/a40-audio-system-astro-edition">Astro A40</a> headset. Sound clarity is absolutely stunning, they are really comfortable to wear and they block out a lot of surrounding background noise.<br />While I absolutely love the headset and wear it all the time,  you can probably guess this  adds to my jumpy-ness!<br /><br />So I finally found a solution!<br /><br />There is a package in the Ubuntu repositories called &#8221;<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">motion</span>&#8221; - which is a really simple motion detection server that utilises a webcam.<br />I had a look at &#8221;<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">zoneminder</span>&#8221; too, but it seems very over-kill for my needs. <br /><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">motion</span> will detect movement (above a configurable threshold), store &#8220;movement&#8221; snapshots and video files, log to a database and more importantly it provides a few hooks to fire commands upon events such as <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">on_event_start</span>, <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">on_motion_detected</span>, etc.<br /><br />I disabled almost every option except the <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">on_event_start</span> hook.<br />This hook will execute the given command when motion has been detected after a (configurable) &#8220;gap&#8221; period of time of no motion - which I set to 10 seconds.<br /><br />The command I set it to execute is this:<br /><blockquote class="tr_bq"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">sudo -u steve notify-send &#8211;hint=int:transient:1 -i &#8216;/usr/share/icons/hicolor/scalable/mimetypes/text-x-apport.svg&#8217; &#8216;LOOK BEHIND YOU!&#8217;</span></blockquote><br />As mentioned in an <a href="http://blog.stevenocchipinti.com/2011/09/gtalksms.html">earlier blog post</a>, <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">notify-send</span> can be found in the <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">libnotify-bin</span> package <br /><br />Note: the <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&#8211;hint=int:transient:1</span> is for Gnome-Shell which has introduced persistent notifcations and I didn&#8217;t want to acknowledge a notification everytime someone walks past!<br /><br />The end result of this little hack is when someone walks anywhere near my doorway, that command gets my attention with a standard Gnome-Shell notification from the bottom of the screen like this:<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-lhooeyQqNMA/TrU3gJviK3I/AAAAAAAAAC8/Coim6i9s2KQ/s1600/Screenshot+at+2011-11-06+00%253A15%253A39.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="45" src="http://4.bp.blogspot.com/-lhooeyQqNMA/TrU3gJviK3I/AAAAAAAAAC8/Coim6i9s2KQ/s320/Screenshot+at+2011-11-06+00%253A15%253A39.png" width="320" /></a></div><br /><br />The reason I am using <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">sudo</span> here is that <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">motion</span> needs to be run as root, and so the <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">notify-send</span> command will also be run as root.<br />I guess because I had Unity installed before Gnome-Shell, when root runs <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">notify-send</span>, I get the Unity style notifications - which is still nice, but as I&#8217;m road testing Gnome-Shell, I figured I may as well use its notification look-n-feel too.<br /><br />Here&#8217;s what it looks like if you leave out the <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">sudo -u steve</span> part:<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-pyeLb7iMzpg/TrU14Aj4PvI/AAAAAAAAAC0/qXOG5V5S2k0/s1600/Screenshot+at+2011-11-06+00%253A09%253A32.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="212" src="http://1.bp.blogspot.com/-pyeLb7iMzpg/TrU14Aj4PvI/AAAAAAAAAC0/qXOG5V5S2k0/s320/Screenshot+at+2011-11-06+00%253A09%253A32.png" width="320" /></a></div><br />
</div>

      <footer class="entry-meta">
        <span class="entry-tags"><a href="/categories/#gnome3" title="Pages tagged gnome3" class="tag">gnome3</a><a href="/categories/#linux" title="Pages tagged linux" class="tag">linux</a><a href="/categories/#ubuntu" title="Pages tagged ubuntu" class="tag">ubuntu</a><a href="/categories/#unity" title="Pages tagged unity" class="tag">unity</a><a href="/categories/#webcam" title="Pages tagged webcam" class="tag">webcam</a></span>
        <span><a href="/2011/11/motion-detection.html" rel="bookmark" title="Motion detection">Motion detection</a> was published on <span class="entry-date date published updated"><time datetime="2011-11-05T11:30:00+11:00">November 05, 2011</time></span></span>
        
        <span class="author vcard"><span class="fn"><a href="" title="About Steven Occhipinti">Steven Occhipinti</a></span></span>
        
      </footer>
    </div><!-- /.entry-content -->
    
      <div class="read-more">
        
          <div class="read-more-header">
            <a href="/2016/12/28/search-and-replace-in-multiple-files-with-vim-and-git/" class="btn">Read More</a>
          </div><!-- /.read-more-header -->
          <div class="read-more-content">
            <h3><a href="/2016/12/28/search-and-replace-in-multiple-files-with-vim-and-git/" title="Search and replace, vim and git">Search and replace, vim and git</a></h3>
            <p>Search and replace, vim and git <a href="/2016/12/28/search-and-replace-in-multiple-files-with-vim-and-git/"> Continue reading</a></p>
          </div><!-- /.read-more-content -->
        
        <div class="read-more-list">
          
            <div class="list-item">
              <h4><a href="/2016/12/28/using-netrw-instead-of-nerdtree-for-vim/" title="Using netrw instead of NERDTree for Vim">Using netrw instead of NERDTree for Vim</a></h4>
              <span>Published on December 28, 2016</span>
            </div><!-- /.list-item -->
          
            <div class="list-item">
              <h4><a href="/2016/12/28/different-author-email-addresses-per-git-repository/" title="Different author email addresses per git repository">Different author email addresses per git repository</a></h4>
              <span>Published on December 28, 2016</span>
            </div><!-- /.list-item -->
          
        </div><!-- /.read-more-list -->
      </div><!-- /.read-more -->
    
    <section id="disqus_thread"></section><!-- /#disqus_thread -->
  </article>
</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>&copy; 2016 Steven Occhipinti. Powered by <a href="http://octopress.org">Octopress</a> using the <a href="https://github.com/jez/hpstr-theme/">HPSTR Theme for Octopress</a>.</span>

  </footer>
</div><!-- /.footer-wrapper -->


	        
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="/javascripts/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="/javascripts/octopress.js" type="text/javascript"></script>
<script src="/javascripts/scripts.min.js"></script>

  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-38345732-3']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>




<script type="text/javascript">
      var disqus_shortname = 'stevenocchipinticom';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://blog.stevenocchipinti.com/2011/11/motion-detection.html';
        var disqus_url = 'http://blog.stevenocchipinti.com/2011/11/motion-detection.html';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



	        

</body>
</html>
