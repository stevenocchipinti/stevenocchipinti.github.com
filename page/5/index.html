
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>StevenOcchipinti.com</title>
  <meta name="author" content="Steven Occhipinti">

  
  <meta name="description" content="Ever find it strange that in Ubuntu you can use the GUI to shutdown the computer without a password, but if you use the poweroff command you will &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://blog.stevenocchipinti.com/page/5">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="StevenOcchipinti.com" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-38345732-3']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">StevenOcchipinti.com</a></h1>
  
    <h2>Coder.</h2>
  
</hgroup>

</header>
  <nav role="navigation">
  <form action="http://google.com/search" method="get">
    <fieldset role="search">
      <input type="hidden" name="q" value="site:blog.stevenocchipinti.com" />
      <input class="search" type="text" name="q" results="0" placeholder="Search"/>
    </fieldset>
  </form>

<ul class="main-navigation">
  <li><a href="/">Home</a></li>
  <li><a href="/archives">Archives</a></li>
  <li><a href="/projects">Projects</a></li>
  <li><a href="/travel">Travel</a></li>
  <li><a href="http://flickr.com/stevenocchipinti">Photos</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2011/08/poweroff-without-password.html">Poweroff Without a Password</a></h1>
    
    
      <p class="meta">
        








  



  
<time datetime="2011-08-21T07:29:00+10:00" pubdate data-updated="true">Aug 21<span>st</span>, 2011</time>
        
         | <a href="/2011/08/poweroff-without-password.html#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><div class="css-full-post-content js-full-post-content">
Ever find it strange that in Ubuntu you can use the GUI to shutdown the computer without a password, but if you use the <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">poweroff</span> command you will need to type in a password?<br /><br />Well there is an easy fix. The <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">/etc/sudoers</span> file governs the use of the <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">sudo</span> command.<br />It can also be configured to allow specified commands, users and/or groups to not have to worry about a sudo password.<br /><br />In Ubuntu, this file also sources the <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">/etc/sudoers.d/</span> directory so the sudoers file doesn&#8217;t get too cluttered.<br /><br />I created a new file called &#8220;powercmds&#8221; under this directory with the following contents:<br /><br /><blockquote><span style="font-family: &quot;Courier New&quot;,Courier,monospace;"># Allow users in the admin group to poweroff the machine without a password</span><br /><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">%admin ALL = NOPASSWD: /sbin/shutdown, /sbin/poweroff, /sbin/halt, /sbin/reboot</span></blockquote><br />Then updated its permissions with this command:<br /><blockquote><div style="font-family: &quot;Courier New&quot;,Courier,monospace;">sudo chmod 0440 /etc/sudoers.d/powercmds</div></blockquote><br />Now anyone in the admin group will not require a password to shutdown the machine.<br /><br />This is very useful for scripting, such as if I want to download a large file and have the computer shutdown when its finished (so I can go to bed or something) this is now possible:<br /><blockquote><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">wget http://somesite.com/somefile.big 2&gt; ~/Desktop/dl.log; sudo poweroff</span></blockquote><br />
</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2011/08/mounting-nfs-in-ubuntu.html">Mounting NFS in Ubuntu</a></h1>
    
    
      <p class="meta">
        








  



  
<time datetime="2011-08-05T06:17:00+10:00" pubdate data-updated="true">Aug 5<span>th</span>, 2011</time>
        
         | <a href="/2011/08/mounting-nfs-in-ubuntu.html#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><div class="css-full-post-content js-full-post-content">
At home we have a NAS that supports NFS!<br /><br />Its quite easy to setup Ubuntu (11.04) as an NFS client - this will allow you to mount the NAS on your local filesystem and it will appear just like any other directory.<br /><br />First step is to install the <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">nfs-common</span> package:<br /><blockquote><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">sudo apt-get install nfs-common</span></blockquote><br />You can now mount NFS volumes!<br />To do so temporarily, can use this command:<br /><blockquote><div style="font-family: &quot;Courier New&quot;,Courier,monospace;">sudo mount.nfs &lt;IPADDRESS&gt;:&lt;REMOTEPATH&gt; &lt;MOUNTPOINT&gt;</div></blockquote><br />The mount point needs to exist prior to mounting. <br />For example, my nas would be mounted as follows:<br /><blockquote><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">sudo mkdir /mnt/nas<br />sudo mount.nfs 192.168.1.10:/nfs/Public /mnt/nas</span></blockquote><br />To make this permanent, you would need to add the following line to <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">/etc/fstab</span>:<br /><br /><blockquote><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">192.168.1.10:/nfs/Public&nbsp; /mnt/NAS&nbsp; nfs&nbsp; defaults&nbsp; 0&nbsp; 0</span></blockquote><br />As a bonus, this also allows you to use the <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">mount</span> and <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">umount</span> commands by just specifying the mount point as these commands will query the <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">/etc/fstab</span> file.<br /><br />For example, once your <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">/etc/fstab</span> file is up to date, these commands will work without specifying the remote host and path:<br /><blockquote><div style="font-family: &quot;Courier New&quot;,Courier,monospace;">sudo umount /mnt/nas</div><div style="font-family: &quot;Courier New&quot;,Courier,monospace;">sudo mount /mnt/nas</div></blockquote>
</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2011/08/regex-substitution-101.html">Regex Substitution 101</a></h1>
    
    
      <p class="meta">
        








  



  
<time datetime="2011-08-01T07:42:00+10:00" pubdate data-updated="true">Aug 1<span>st</span>, 2011</time>
        
         | <a href="/2011/08/regex-substitution-101.html#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><div class="css-full-post-content js-full-post-content">
A while ago I was helping a friend with a regex.<br />He  wanted to extract parts of the <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">/etc/passwd</span> file, so I explained my basic thought process to him so he could understand how I came up with the pattern.<br />I thought I would (paraphrase and) blog this explanation, as it might just help others out too.<br /><br /><b>The Explanation:</b><br />First you have to write a regex that matches as much of the string (in this case the lines in the <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">passwd</span> file) as you need (or all of it to be safe):<br /><br /><blockquote><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">[^:]</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = will match a character that is not a colon</blockquote><br />You can repeat this pattern with the * operator to match everything up to the first colon (because that wont match the pattern):<br /><br /><blockquote><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">[^:]*</span>&nbsp;&nbsp;&nbsp;&nbsp; = will match everything up to the colon</blockquote><br />That pattern obviously doesnt have the bit you want, so you need to keep matching&#8230;<br />The next character you need to match is the colon itself:<br /><br /><blockquote><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">[^:]*:</span>&nbsp;&nbsp;&nbsp; = will match everything up to the colon, and then one colon character too</blockquote><br />This isn&#8217;t enough either, but now you just need to repeat your self for as many sections as you want.<br />There is 6 colons and 7 fields in your example of the passwd file, so repeat the pattern to suit:<br /><br /><blockquote><div style="font-family: &quot;Courier New&quot;,Courier,monospace;">[^:]*:[^:]*:[^:]*:[^:]*:[^:]*:[^:]*:[^:]*</div></blockquote><br />Now this pattern will match the entire string by going through section-by-section.<br />Of course .* would also match the whole string, but now we have parts of the pattern that represent parts of the string.<br />Using these parts, we can wrap the bit you want to use with backreferences (brackets) so we can use them later.<br /><br />Lets say you only wanted the 5th field (the username).<br />First, wrap the 5th field in a backreference.<br />Note you have to escape the brackets with a backslash otherwise it will look for an actual bracket character:<br /><br /><blockquote><div style="font-family: &quot;Courier New&quot;,Courier,monospace;">[^:]*:[^:]*:[^:]*:[^:]*:\([^:]*\):[^:]*:[^:]*</div></blockquote><br />Now you can use it in a substitution, which will replace everything that is matched with what you tell it to:<br /><br /><blockquote><div style="font-family: &quot;Courier New&quot;,Courier,monospace;">:%s/[^:]*:[^:]*:[^:]*:[^:]*:\([^:]*\):[^:]*:[^:]*/hello</div></blockquote><br />This will replace what it has matched (which is everything) with the word &#8216;hello&#8217;<br />Now you can add that part that you captured earlier with the backreference<br /><br /><blockquote><div style="font-family: &quot;Courier New&quot;,Courier,monospace;">:%s/[^:]*:[^:]*:[^:]*:[^:]*:\([^:]*\):[^:]*:[^:]*/hello \1</div></blockquote><br />The \1 means the first backreference, if you had 2 sets of backets, you could also use \2<br />Running this substition will result in this line:<br /><br /><blockquote><div style="font-family: &quot;Courier New&quot;,Courier,monospace;">apache:x:48:48:Apache:/var/www:/sbin/nologin</div></blockquote><br />becoming this line:<br /><br /><blockquote><div style="font-family: &quot;Courier New&quot;,Courier,monospace;">hello Apache</div></blockquote><br />To extend this further, you could add stuff like this:<br /><br /><blockquote><div style="font-family: &quot;Courier New&quot;,Courier,monospace;">:%s/[^:]*:[^:]*:[^:]*:[^:]*:\([^:]*\):\([^:]*\):[^:]*/hello \1, I know you home is \2 because I know regex</div></blockquote><br />Which would result in this line:<br /><br /><blockquote><div style="font-family: &quot;Courier New&quot;,Courier,monospace;">hello Apache, I know you home is /var/www because I know regex</div></blockquote><br />Obviously you wouldnt want to make these substitutions in your passwd file, but you could use this regex substitution in a pipeline with sed, like this:<br /><br /><blockquote><div style="font-family: &quot;Courier New&quot;,Courier,monospace;">cat /etc/passwd | sed &#8220;s/[^:]*:[^:]*:[^:]*:[^:]*:\([^:]*\):\([^:]*\):[^:]*/hello \1, I know you home is \2 because I know regex/&#8221; &gt; ~/regexed.txt</div></blockquote><br />Note that unlike vim, sed requires the substitution to be terminated with a trailing separator, so valid syntaxes are:<br /><div style="font-family: &quot;Courier New&quot;,Courier,monospace;"><br /></div><blockquote><div style="font-family: &quot;Courier New&quot;,Courier,monospace;">sed =&nbsp; sed &#8216;s/PATTERN/REPLACEMENT/&#8217;</div><div style="font-family: &quot;Courier New&quot;,Courier,monospace;">vim =&nbsp; :s/PATTERN/REPLACEMENT/</div><div style="font-family: &quot;Courier New&quot;,Courier,monospace;">vim =&nbsp; :s/PATTERN/REPLACEMENT</div></blockquote><br />The last separator is useful for putting additional options, such as <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">g</span> for global replaces (multiple times on one line), etc.<br /><br />Another helpful note is that the separator does not have to be / it could be (almost) any character.<br />For example, / might be cumbersome if your dealing with paths that have a lot of /&#8217;s, so you could use # instead:<br /><blockquote><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">%s#this#that#g </span></blockquote>
</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2011/07/search-and-replace-in-multiple-files.html">Search and Replace in Multiple Files With Sed</a></h1>
    
    
      <p class="meta">
        








  



  
<time datetime="2011-07-20T04:25:00+10:00" pubdate data-updated="true">Jul 20<span>th</span>, 2011</time>
        
         | <a href="/2011/07/search-and-replace-in-multiple-files.html#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><div class="css-full-post-content js-full-post-content">
Back on the 30th of May, I put up a blog post on how to do a <a href="http://blog.stevenocchipinti.com/2011/05/search-and-replace-in-multiple-files.html">search and replace in multiple files with Vim</a>.<br />I think this is a great way of doing substitutions in multiple files because you get to see a preview of what it looks like before you actually writing it to disk.<br /><br />This is great for a small number of files, but to do a large directory of files, you don&#8217;t really gain any advantages as you&#8217;re probably not going to open every file in a vim buffer and review each one separately.<br /><br />This is where <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">sed</span> and <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">find</span> come in handy!<br /><br />This command will replace every occurrence of the word &#8220;foo&#8221; with the word &#8220;bar&#8221; in all html files recursively from the current directory:<br /><blockquote><pre>find . -name "*.html" -exec sed -i "s/foo/bar/g" '{}' \;</pre></blockquote><br /><b>The explanation:</b><br /><br />This might look a little confusing, but it essentially 2 parts:<br /><br />The first part will list all the <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">.html</span> files recursively and for each one, execute the command specified by the <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">-exec</span> option:<br /><blockquote><pre>find . -name "*.html" -exec ...</pre></blockquote><br />The second part is the command to execute for each found file, which in this case is <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">sed</span>:<br /><blockquote><pre>sed -i "s/foo/bar/g" &lt;TheFile&gt;</pre></blockquote><br />The <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&#8217;{}&#8217;</span> represents the current file and the <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">\;</span> represents the end of the command to execute as part of the <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">-exec</span> option.<br /><br /><br /><b>Doing more:</b><br /><br />As you can see, the <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">-name</span> option to the <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">find</span> command takes a <a href="http://en.wikipedia.org/wiki/Glob_%28programming%29">glob pattern</a>.<br />If you wanted to be more specific about which files should have the substituion, you could use a regular expression instead, like this:<br /><blockquote><pre>find . -regex ".*[.]html\|.*[.]js" -exec sed -i "s/foo/bar/g" '{}' \;</pre></blockquote><br />This regex will match all files that end with &#8220;.html&#8221; or &#8220;.js&#8221;.<br /><br />If you wanted to preview your changes before they are actually written to disk, there are a few ways of accomplishing this, but the simpliest is probably to modify the command as follows:<br /><blockquote><pre>find . -name "*.html" -exec sed "s/foo/bar/g" '{}' \; | less</pre></blockquote><br />Removing the <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&#8220;-i&#8221;</span> will mean that instead of writing the changes &#8220;in place&#8221;, the changed output will be written to <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">STDOUT</span> instead of the files.<br />Then to capture this (potentially large) output, we pipe it to <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">less</span>.<br />From within <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">less</span> you will be able to do searches (with the &#8221;<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">/</span>&#8221; key) and scroll through the output to do a quick sanity check.<br />Once your happy, you can remove the pipe and add the <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&#8220;-i&#8221;</span> option again to make it permanent!
</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2011/07/ssh-copy-id-with-alternative-port.html">Ssh-copy-id With an Alternative Port</a></h1>
    
    
      <p class="meta">
        








  



  
<time datetime="2011-07-14T16:05:00+10:00" pubdate data-updated="true">Jul 14<span>th</span>, 2011</time>
        
         | <a href="/2011/07/ssh-copy-id-with-alternative-port.html#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><div class="css-full-post-content js-full-post-content">
If you use ssh on a regular basis, you probably already know about setting up ssk-keys.<br />If you dont know about ssh-keys, you should! - its worth reading up on.<br /><br /><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">ssh-copy-id</span> is a helper script that will copy your public key across to the remote machine and append it to the <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">authorized_keys</span> file.<br /><br />This is all well and good if the server is on port 22, but for non-standard ports, this script does not support a <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">-p</span> option.<br /><br />Instead of copying across the key manually, I googled for workarounds and came across <a href="http://mikegerwitz.com/2009/10/07/ssh-copy-id-and-sshd-port/">this post</a> where the author explains that the arguments to <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">ssh-copy-id</span> are simply passed on to the ssh command.<br /><br />This means by using quotes, everything inside of them will be passed straight through and that allows a command like this to achieve the desired result:<br /><br /><blockquote><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">ssh-copy-id -i ~/.ssh/id_rsa.pub ‘-p xxxx username@host’</span></blockquote><br />Kudos to Mike Gerwitz for the tip.
</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2011/07/pencil-for-ui-design.html">Pencil for UI Design</a></h1>
    
    
      <p class="meta">
        








  



  
<time datetime="2011-07-09T13:34:00+10:00" pubdate data-updated="true">Jul 9<span>th</span>, 2011</time>
        
         | <a href="/2011/07/pencil-for-ui-design.html#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><div class="css-full-post-content js-full-post-content">
I&#8217;m designing software!<br /><br />I&#8217;m currently in the early stages of design and have developed some basic requirements, a feature list, some rough UI sketches and a very rough roadmap.<br /><br />I&#8217;m putting a fair bit of thought into the user-friendliness of the app and I have gone through quite a few different idea&#8217;s for the UI.<br />During this sort-of brainstorming activity, I got really sick of trying to change my sketches on paper and asked my self <i>&#8220;why aren&#8217;t I doing this electronically!?&#8221;</i> - so I started looking into freeware mockup software.<br /><br />My searches lead me to this page: <br /><a href="http://stackoverflow.com/questions/54606/what-free-software-can-i-use-to-create-ui-mockups">http://stackoverflow.com/questions/54606/what-free-software-can-i-use-to-create-ui-mockups</a><br /><br />Which lead me to <b>Pencil</b>: <br /><a aiotitle="http://pencil.evolus.vn/en-US/Home.aspx" href="http://pencil.evolus.vn/en-US/Home.aspx">http://pencil.evolus.vn/en-US/Home.aspx</a><br /><br /><b>Pencil</b> is an <a href="http://en.wikipedia.org/wiki/Xul">XUL</a> based application for making UI mockups - and its free!<br />For those of you that have used professional UI mocking tools, I&#8217;m not sure you&#8217;ll find this to suit your needs, but as I have never used any software like this, this was basic enough for me (and faster than using The GIMP).<br /><br />Pencil is advertised as a firefox plugin, but the .xpi is configured for FF3.5 (which is a little old!) so instead of hacking at this, the <a href="http://pencil.evolus.vn/en-US/Downloads/Application.aspx">downloads page</a> offers a &#8220;stand-alone&#8221; option that you can run with <a href="http://en.wikipedia.org/wiki/Xulrunner">xulrunner</a>.<br /><br />Please note at the time of this blog, this app requires xulrunner 1.9.<br />In Ubuntu, xulrunner can be easily installed with this command:<br /><blockquote><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">sudo apt-get install xulrunner-1.9.2</span></blockquote><br />Once you&#8217;ve downloaded and extracted Pencil, and you have xulrunner 1.9 installed, you can run Pencil by giving xulrunner the <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">application.ini</span> file, for example:<br /><blockquote><div style="font-family: &quot;Courier New&quot;,Courier,monospace;">xulrunner /opt/Pencil-1.2-0-linux-gtk/application.ini</div></blockquote><br />The UI for Pencil is pretty intuitive and judging by the menus, there isn&#8217;t a whole bunch of advanced features (or at least from what I can tell), but I do like the simplicity and I was able to sketch up my UI design quite quickly.<br /><br />By deafult (on Ubuntu) it comes with a number of &#8220;Collections&#8221; of widgets to start playing with.<br />I particularly like the &#8220;Sketchy GUI&#8221; collection for mockups, so the end result does not allow the viewer to let any preconceived opinions about the look and feel affect their judgement (some people dont like the look of the Windows XP widgets and may get turned off straight away).<br /><br />This also means if you change the implementation (from desktop app to web app for example) the mockups may possibly stay the same without too much confusion.<br /><br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://pencil.evolus.vn/en-US/Handlers/PictureHandler.ashx?ResourceId=4be6736a-429a-4d97-ab3e-4a8a8c7d3c85&amp;Width=881&amp;Height=0" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="232" src="http://pencil.evolus.vn/en-US/Handlers/PictureHandler.ashx?ResourceId=4be6736a-429a-4d97-ab3e-4a8a8c7d3c85&amp;Width=881&amp;Height=0" width="320" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">Screenshot of the &#8220;Sketchy GUI&#8221; collection from the Pencil Website</td><td class="tr-caption" style="text-align: center;"><br /></td></tr></tbody></table><br /><br />If you are after more complete mockup software, that StackOverflow article has some good references, and I have heard <a href="http://www.balsamiq.com/products/mockups">Balsamiq</a> is quite good, but Pencil suited my needs just fine.
</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2011/07/python-fu-for-gimp.html">Python-fu for the Gimp</a></h1>
    
    
      <p class="meta">
        








  



  
<time datetime="2011-07-03T11:52:00+10:00" pubdate data-updated="true">Jul 3<span>rd</span>, 2011</time>
        
         | <a href="/2011/07/python-fu-for-gimp.html#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><div class="css-full-post-content js-full-post-content">
I&#8217;ve been meaning to learn how to script The Gimp for a while now, but have never bothered to put the time aside to do it. Well, I finally did it, and this is why and how :)<br /><br /><b>The story:</b><br /><b>&nbsp;</b> <br />When I had my 21st birthday, my brother made the party invites for me. He added a whole bunch of photos and I&#8217;ve still got a copy of that with all my photos as a keepsake.<br />Now his birthday is coming up and I thought I would repay the favour.<br /><br />The Idea I had was to scan a bunch of old photos (like he did), then use The Gimp to make them look like printed photos (white border, drop shadow, kind of like polaroids) and scatter them around a &#8220;Happy Birthday&#8221; title.<br /><br />I spent quite a while scanning the photos, adding them all as layers to a single canvas, resizing them to suit and then individually adding white padding, a black stroke around the outside, dropping a shadow, rotating and moving each individual layer to lay it out nicely, I was finally happy with the end result and saved a .xcf and then exported a .jpg.<br />At this stage I had all the scans, a font, a background image, the .xcf and the .jpg all saved in a folder on my desktop. <br />I quit The Gimp, got a flash drive and copied the .jpg over so I got get it printed, shutdown the pc and went for dinner.<br /><br />When I got back quite some time later, my pc hadn&#8217;t quite shutdown yet, it just had a black screen.. So I left it a little longer and it still hadn&#8217;t shutdown, so I held down the power button to force it.<br />The next day, I got asked to make a small adjustment to the invite, and to my horror, I could not find the .xcf anywhere! I had the exported .jpg from the flash drive, but that wasn&#8217;t suitable to make the adjustment&#8230; something had happened and to this day I&#8217;m still not sure what, but I lost all my work&#8230; When I realised I had to redo all that work, that&#8217;s when I put time aside to learn how to script The Gimp!<br /><br /><b>Scripting The Gimp:</b><br /><br />I took a look at some code examples for The Gimp&#8217;s script-fu functionality and having never learned Lisp, it looked pretty foreign to me! That&#8217;s when I noticed there was a Python-fu equivalent (luckily).<br /><br />Using the Python Console from within Gimp is really easy!<br />It has a &#8220;Browse&#8221; button which brings up the &#8220;Python Procedure Browser&#8221; - which is a list of functions that interact with The Gimp.<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-nKAIY9543z0/ThBPoNzjquI/AAAAAAAAAB8/TqfEJU2SvEI/s1600/gimp-console.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="267" src="http://1.bp.blogspot.com/-nKAIY9543z0/ThBPoNzjquI/AAAAAAAAAB8/TqfEJU2SvEI/s320/gimp-console.png" width="320" /></a></div><br />Using the filterbox at the top, you can easily find the python function that matches the action you would normally execute using The Gimp&#8217;s menus (such as a layer resize, or filter).<br />When you select the function, it will show you a basic man page on what it does and the parameters it takes, and applying this function will insert the code into the console with place holders for the parameters, which you can then simply modify and execute.<br /><br />After getting the basics from Googling around, I made a basic script that I just copied and pasted into the console when I wanted to execute the repetitive actions.<br />I then optimised the script by wrapping it in a function, doing all my actions in a separate context (as not to disturb the users context for things like selected brush, etc.) and also group all my actions in a single undo (to simplify the history and make it easy to undo what my script does).<br /><br /><b>Work-arounds:</b><br /><br />There are a couple of hacks in the script that I couldn&#8217;t work out the nice way around in a short period of time (I&#8217;m still a n00b).<br />Rather than working out how to fix it, I thought I would just describe them here. <br /><br />One of those being that to add a white border around a layer, I need to resize the layer with an offset, and this new extra space would not always be white (regardless of my selected background color). My work around was to add a white layer behind it and merge it down.<br /><br />The other hack was with stoking. To add a 1px black stroke around a layer, I normally just specify 1px black from the stroke dialogue (as opposed to using the selected brush). I could not find an equivalent to this in the Python API - it always used the selected brush. <br />As the default brushes include a 1px brush (and a 3px brush, but no 2px brush) I thought I&#8217;d use that, but to do a stroke around the outside of a layer, I needed to select-all, then stoke, but with a 1px brush, I could not specify I wanted that 1px to be on the inside of the selection. So stroking with this method put the line on the top and left sides, not on the bottom and right.<br />The hack I used here is to rotate 180 degrees, stroke and repeat.<br /><br />Not the most elegant of scripts, but this was my first attempt and got the job done.<br /><br /><b>Registering the script with The Gimp:</b><br /><br />So now that the script was working (albeit with work arounds) and I added the polish (function definition, separate context, grouped undo, etc.) I was ready to add it to the menus just like any other filter.<br />I used an existing script (located in ~/.gimp-2.6/plug-ins/) as a baseline and adjusted it for my new script (that I called &#8220;photofy&#8221;).<br />This part of the code allows you to specify the name of the script, where in the menu it should be registered and if there are any user-specified inputs to the script you can even specify a simple GUI for a dialogue box to get them from the user - which I did to collect the desired size of the white margin.<br />You can see this part of the code at the bottom of the python script.<br /><br /><b>Demo:</b><br /><br />So now the fun part, this is how you use it :)<br />Here is a simple image with 2 layers: a white background layer and a smaller subject layer (the gradient).<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-lpQOJzvaj44/Tgb-hNSxBwI/AAAAAAAAABs/baRi7vX9YCE/s1600/1.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="284" src="http://4.bp.blogspot.com/-lpQOJzvaj44/Tgb-hNSxBwI/AAAAAAAAABs/baRi7vX9YCE/s320/1.png" width="320" /></a></div><br />With the subject layer selected, navigate to the menu in which the &#8220;Photofy&#8221; script is registered.<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-TfMu_L4Sgzw/Tgb-hx17ebI/AAAAAAAAABw/-Qz_f-nxCkU/s1600/2.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="320" src="http://4.bp.blogspot.com/-TfMu_L4Sgzw/Tgb-hx17ebI/AAAAAAAAABw/-Qz_f-nxCkU/s320/2.png" width="262" /></a></div><br />The dialogue box that I specified in the script-fu code segment at the bottom of the script will appear and allow the user to enter the size of the white margin.<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-9IyK0kdIzaQ/Tgb-iM-92pI/AAAAAAAAAB0/iDouukMupfw/s1600/3.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="170" src="http://1.bp.blogspot.com/-9IyK0kdIzaQ/Tgb-iM-92pI/AAAAAAAAAB0/iDouukMupfw/s320/3.png" width="320" /></a></div><br />When you press &#8220;OK&#8221;, the script will run through its actions and the user&#8217;s environment will remain the same, and the there will be a single new undo step in the history.<br />This is the final product:<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-ZiLNMJ8g7iw/Tgb-ixVI8mI/AAAAAAAAAB4/o6nCg1vhxME/s1600/4.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="284" src="http://1.bp.blogspot.com/-ZiLNMJ8g7iw/Tgb-ixVI8mI/AAAAAAAAAB4/o6nCg1vhxME/s320/4.png" width="320" /></a></div><br /><b>The code:</b> <br /><br />If you&#8217;re interested in seeing what the code looks like, or want to use the script yourself (either as is, or as a baseline to write you own), it is available here:<br /><a href="https://github.com/stevenocchipinti/Gimp-Python-Fu/blob/master/photofy.py">https://github.com/stevenocchipinti/Gimp-Python-Fu/blob/master/photofy.py</a>
</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2011/06/vi-mode-for-bash.html">Vi Mode for Bash</a></h1>
    
    
      <p class="meta">
        








  



  
<time datetime="2011-06-26T23:22:00+10:00" pubdate data-updated="true">Jun 26<span>th</span>, 2011</time>
        
         | <a href="/2011/06/vi-mode-for-bash.html#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><div class="css-full-post-content js-full-post-content">
So it turns out bash has a vi mode!<br />(Can&#8217;t believe I didn&#8217;t know about this earlier)<br /><br />To enable vi mode, just type this into your shell:<br /><blockquote style="font-family: &quot;Courier New&quot;,Courier,monospace;">$&gt; set -o vi</blockquote><br />That will enable it for this shell so you can try it out, and if you like it, add that line to your <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">~/.bashrc</span> file for future.<br /><br />One really useful vi-mode command is pressing &#8217;<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">v</span>&#8217; from command mode. This will put your current command line into vim to modify. <br /><br />To get more help on the commands available in vi-mode, take a look at the bottom of this man page:<br /><blockquote style="font-family: &quot;Courier New&quot;,Courier,monospace;">$&gt; man 3 readline</blockquote><br />To get more information on the various options available for bash, take a look at:<br /><blockquote><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">$&gt; help set</span></blockquote><br />I&#8217;m going to give it ago in the coming weeks to see if its actually useful or not. <br /><br />So far, I&#8217;ve found one small annoyance, I use ctrl+l to clear the terminal, but with the vi key bindings enabled, this only works from command mode (you have to hit <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">ESC</span> first).<br />To fix this, I added this to my <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">~/.bashrc</span> file:<br /><blockquote><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">bind -m vi-insert &#8216;Control-l: clear-screen&#8217;</span></blockquote><br />These commands could also be added to <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">/etc/inputrc</span>, but I&#8217;m happy to leave these 2 lines together in my <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">~/.bashrc</span> so its easier to remember.
</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2011/06/phpremoteadmin.html">PhpRemoteAdmin</a></h1>
    
    
      <p class="meta">
        








  



  
<time datetime="2011-06-24T02:56:00+10:00" pubdate data-updated="true">Jun 24<span>th</span>, 2011</time>
        
         | <a href="/2011/06/phpremoteadmin.html#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><div class="css-full-post-content js-full-post-content">
If you&#8217;ve ever used PhpMyAdmin before, you&#8217;ll know it can be quite handy, especially for people like me who always forget SQL&#8217;s syntax.<br />I even use it for simple tasks just so I can see what SQL it generated and it even has a handy &#8220;Create PHP Code&#8221; button to give me a baseline to start hacking the query to suit my situation.<br /><br />This is great for local setups, but sometimes I need to do a query a production database where PhpMyAdmin is not installed and its alot easier to inspect the data of big tables with a gui (at least for me anyway).<br /><br />Another helpful tip that I picked up from my new work place (thanks Rich) is to make PhpMyAdmin connect to a remote database via an SSH tunnel.<br />It requires a small config change to PhpMyAdmin, but it works a charm!<br /><br />To differentiate between a tunnelled database and the local one, you need to configure your web server to serve up PhpMyAdmin from an additional URL, such as <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">http://localhost/php<b>remote</b>admin</span> in addition to the standard <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">http://localhost/phpmyadmin</span>.<br /><br />I added a second alias for PhpMyAdmin in <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">/etc/apache2/conf.d/phpmyadmin.conf</span> to look like this:<br /><br /><blockquote style="font-family: &quot;Courier New&quot;,Courier,monospace;">Alias /phpmyadmin /usr/share/phpmyadmin<br />Alias /phpremoteadmin /usr/share/phpmyadmin</blockquote><br />Then, I modified my <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">/etc/phpmyadmin/config.inc.php</span> to include this:<br /><br /><blockquote style="font-family: &quot;Courier New&quot;,Courier,monospace;">// If phpremoteadmin is requested, use an ssh tunnel on 6666<br />// Note: This doesn&#8217;t create the tunnel, use ~/bin/mysql_remote<br />if (substr_count($_SERVER[&#8220;REQUEST_URI&#8221;], &#8220;phpremoteadmin&#8221;) &gt; 0) {<br />$cfg[&#8216;Servers&#8217;][$i][&#8216;connect_type&#8217;] = &#8216;tcp&#8217;;<br />$cfg[&#8216;Servers&#8217;][$i][&#8216;port&#8217;] = &#8216;6666&#8217;;<br />$cfg[&#8216;Servers&#8217;][$i][&#8216;host&#8217;] = &#8216;127.0.0.1&#8217;;<br />}</blockquote><br />Basically that means if the request is for <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">/phpremoteadmin</span>, look for the database on port 6666 instead of the preconfigured database port.<br /><br />You&#8217;l have to reload apache for these changes to take effect:<br /><blockquote><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">sudo /etc/init.d/apache2 reload</span></blockquote><br />Then you need a SSH tunnel from your local port 6666 to the servers port 3306 (where mysql is normally listening). To create this tunnel, you can use:<br /><br /><blockquote style="font-family: &quot;Courier New&quot;,Courier,monospace;">ssh -L 6666:localhost:3306 $USER@$HOST</blockquote><br />But, to make it easier, I use (a slight variation) of this script:<br /><br /><blockquote style="font-family: &quot;Courier New&quot;,Courier,monospace;">#!/bin/sh<br /><br />if [ $# -lt 1 ] || [ $# -gt 2 ]; then<br />&nbsp; echo &#8220;Usage: $0 host1 [host2]&#8221;<br />&nbsp; exit 2<br />fi<br /><br />USER=&#8221;steve&#8221;<br />HOST=$1<br /><br />DBHOST=&#8221;localhost&#8221;<br />[ -z &#8220;$2&#8221; ] || DBHOST=&#8221;$2&#8221;<br /><br />echo &#8220;Browse to: http://localhost/phpremoteadmin&#8221;<br />ssh -L 6666:$DBHOST:3306 $USER@$HOST</blockquote><br />The script also allows you to pass in an optional argument of the host where the database is.<br />By default, that is localhost (the remote server&#8217;s localhost). <br />This is useful if you can only ssh to a gateway server and the database is on another server within that remote network that you wouldn&#8217;t normally be able to ssh directly to.<br /><br />This has been really helpful, so I wanted to share :)
</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2011/06/bash-auto-complete.html">Bash Auto-complete</a></h1>
    
    
      <p class="meta">
        








  



  
<time datetime="2011-06-20T05:40:00+10:00" pubdate data-updated="true">Jun 20<span>th</span>, 2011</time>
        
         | <a href="/2011/06/bash-auto-complete.html#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><div class="css-full-post-content js-full-post-content">
There are a ton of extended auto-completions that come with Ubuntu, but they are disabled by default.<br /><br />Have a look in the <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">/etc/bash_completion.d/</span> directory for the programs that have specific auto-completes (such as <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">apt-get</span>, <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">git</span>, <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">apache2ctl</span>, etc.).<br /><br />To get all the extra auto-completion-goodness, all you have to do is source <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">/etc/bash_completion</span> in your profile.<br /><br />I added this is my <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">.bashrc</span>, but there may already be a commented out block for this in the stock <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">.bashrc</span> file for ubuntu:<br /><blockquote><span style="font-family: &quot;Courier New&quot;,Courier,monospace;"># Enable bash completion in interactive shells</span><br style="font-family: &quot;Courier New&quot;,Courier,monospace;" /><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">if [ -f /etc/bash_completion ] &amp;&amp; ! shopt -oq posix; then</span><br style="font-family: &quot;Courier New&quot;,Courier,monospace;" /><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp;&nbsp;&nbsp; . /etc/bash_completion</span><br style="font-family: &quot;Courier New&quot;,Courier,monospace;" /><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">fi</span></blockquote>
</div>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/page/6/">&larr; Older</a>
    
    <a href="/archives">Blog Archives</a>
    
    <a class="next" href="/page/4/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <ul class="social-icons">
    <li><a class="social-rss" href="/atom.xml" title="subscribe via RSS">RSS</a></li>
    <li><a class="social-github" href="https://github.com/stevenocchipinti" title="GitHub">GitHub</a></li>
    <li><a class="social-linkedin" href="http://au.linkedin.com/pub/steve-occhipinti/18/55/750" title="LinkedIn">LinkedIn</a></li>
    <li><a class="social-flickr" href="http://flickr.com/stevenocchipinti" title="Flickr">Flickr</a></li>
    <li><a class="social-twitter" href="http://twitter.com/steveocchipinti" title="Twitter">Twitter</a></li>
    <li><a class="social-facebook" href="http://facebook.com/stevenocchipinti" title="Facebook">Facebook</a></li>
  </ul>
  <div style="clear: both;"/>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/2015/03/24/git-reset-cheatsheet/">Git Reset Cheatsheet</a>
      </li>
    
      <li class="post">
        <a href="/2014/12/29/sending-email-from-the-command-line/">Sending Email From the Command Line</a>
      </li>
    
      <li class="post">
        <a href="/2014/03/17/introduction-to-vim-for-ide-users/">Introduction to Vim for IDE Users</a>
      </li>
    
      <li class="post">
        <a href="/2014/03/10/completely-removing-a-git-commit-due-to-sensitive-information/">Completely Removing a Git Commit Due to Sensitive Information</a>
      </li>
    
      <li class="post">
        <a href="/2013/12/14/preparing-for-trailwalker/">Preparing for TrailWalker</a>
      </li>
    
  </ul>
</section>

  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - Steven Occhipinti -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'stevenocchipinticom';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
